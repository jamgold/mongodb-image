<template name='crop'>
  {{#if Template.subscriptionsReady}}
    {{#if canCrop}}
      {{! make this a sub template so we only engage Croppie if we can actually edit the image}}
      {{>croppie id=id}}
    {{else}}
      {{#if currentUser}}
        <h1>You don't have permission to crop this image</h1>
      {{else}}
        <h1>You need to login</h1>
      {{/if}}
    {{/if}}
  {{else}}
    <center><img src="/circle-loading-animation.gif"></center>
  {{/if}}
</template>

<template name='croppie'>
  <div class="row">
    <div class="col-lg-8 ">
      <img id="croppie" src="/circle-loading-animation.gif" />
    </div>
    <div class="col-lg-4 ">
      <img id="cropped">
    </div>
  </div>
  <button class="btn btn-secondary zoom">Zoom 0</button>
  <div class="btn-group" role="group" aria-label="Save">
    <button class="btn btn-success save">Save</button>
    <button class="btn btn-info save image">Save (Image)</button>
    <button class="btn btn-info save list">Save (List)</button>
  </div>
  <div class="btn-group" role="group" aria-label="Horizontal Button Group Rotation">
    <button type="button" class="btn btn-secondary rotate">90</button>
    <button type="button" class="btn btn-secondary rotate">180</button>
    <button type="button" class="btn btn-secondary rotate">270</button>
    <button type="button" class="btn btn-secondary rotate">-90</button>
    <button type="button" class="btn btn-secondary rotate">-180</button>
    <button type="button" class="btn btn-secondary rotate">-270</button>
  </div>
  <a href="/image/{{id}}" class="btn btn-dark">Back</a>
</template>